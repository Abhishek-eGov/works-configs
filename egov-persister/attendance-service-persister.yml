serviceMaps:
 serviceName: attendance-service
 mappings:
 - version: 1.0
   name: attendance
   description: Persists attendance details in eg_wms_attendance_register table
   fromTopic: save-attendance
   isTransaction: true
   queryMaps:
    - query: INSERT INTO eg_wms_attendance_register(id,tenantid,registernumber,name,startdate,enddate,status,additionaldetails,createdby,lastmodifiedby,createdtime,lastmodifiedtime) VALUES (?,?,?,?,?,?,?,?,?,?,?,?);
      basePath: attendanceRegister.*
      jsonMaps:
       - jsonPath: $.attendanceRegister.*.id

       - jsonPath: $.attendanceRegister.*.tenantId

       - jsonPath: $.attendanceRegister.*.registerNumber

       - jsonPath: $.attendanceRegister.*.name

       - jsonPath: $.attendanceRegister.*.startDate

       - jsonPath: $.attendanceRegister.*.endDate

       - jsonPath: $.attendanceRegister.*.status

       - jsonPath: $.attendanceRegister.*.additionalDetails
         type: JSON
         dbType: JSONB

       - jsonPath: $.attendanceRegister.*.auditDetails.createdBy

       - jsonPath: $.attendanceRegister.*.auditDetails.lastModifiedBy

       - jsonPath: $.attendanceRegister.*.auditDetails.createdTime

       - jsonPath: $.attendanceRegister.*.auditDetails.lastModifiedTime

 - version: 1.0
   name: attendee
   description: Persists attendee details in eg_wms_attendance_attendee table
   fromTopic: save-attendee
   isTransaction: true
   queryMaps:
    - query: INSERT INTO eg_wms_attendance_attendee(id,tenantid,individual_id,register_id,enrollment_date,deenrollment_date,additionaldetails,createdby,lastmodifiedby,createdtime,lastmodifiedtime) VALUES (?,?,?,?,?,?,?,?,?,?,?);
      basePath: attendees.*
      jsonMaps:

       - jsonPath: $.attendees.*.id

       - jsonPath: $.attendees.*.tenantId

       - jsonPath: $.attendees.*.individualId

       - jsonPath: $.attendees.*.registerId

       - jsonPath: $.attendees.*.enrollmentDate

       - jsonPath: $.attendees.*.denrollmentDate

       - jsonPath: $.attendees.*.additionalDetails
         type: JSON
         dbType: JSONB

       - jsonPath: $.attendees.*.auditDetails.createdBy

       - jsonPath: $.attendees.*.auditDetails.lastModifiedBy

       - jsonPath: $.attendees.*.auditDetails.createdTime

       - jsonPath: $.attendees.*.auditDetails.lastModifiedTime
   
 - version: 1.0
   name: staff registration
   description: Persists staff registration details in eg_wms_attendance_staff table
   fromTopic: save-staff
   isTransaction: true
   queryMaps:
    - query: INSERT INTO eg_wms_attendance_staff(id,tenantid,individual_id,register_id,enrollment_date,deenrollment_date,additionaldetails,createdby,lastmodifiedby,createdtime,lastmodifiedtime) VALUES (?,?,?,?,?,?,?,?,?,?,?);
      basePath: staff
      jsonMaps:
       - jsonPath: $.staff.id

       - jsonPath: $.staff.tenantId

       - jsonPath: $.staff.individualId

       - jsonPath: $.staff.registerId

       - jsonPath: $.staff.enrollmentDate

       - jsonPath: $.staff.denrollmentDate

       - jsonPath: $.staff.additionalDetails
         type: JSON
         dbType: JSONB

       - jsonPath: $.staff.auditDetails.createdBy

       - jsonPath: $.staff.auditDetails.lastModifiedBy

       - jsonPath: $.staff.auditDetails.createdTime

       - jsonPath: $.staff.auditDetails.lastModifiedTime
   

 - version: 1.0
   description: update Attendance
   fromTopic: update-attendance
   isTransaction: true
   queryMaps:
      - query: UPDATE eg_wms_attendance_register set name=?, startdate=?, enddate=?, status=?,additionaldetails=?,lastmodifiedby=?, lastmodifiedtime=? where id=?;
        basePath: attendanceRegister.*
        jsonMaps:           
          - jsonPath: $.attendanceRegister.*.name

          - jsonPath: $.attendanceRegister.*.startDate

          - jsonPath: $.attendanceRegister.*.endDate

          - jsonPath: $.attendanceRegister.*.status

          - jsonPath: $.attendanceRegister.*.additionalDetails
            type: JSON
            dbType: JSONB

          - jsonPath: $.attendanceRegister.*.auditDetails.lastModifiedBy

          - jsonPath: $.attendanceRegister.*.auditDetails.lastModifiedTime
          
          - jsonPath: $.attendanceRegister.*.id

 - version: 1.0
   description: update Attendee
   fromTopic: update-attendee
   isTransaction: true
   queryMaps:  
      - query: UPDATE eg_wms_attendance_attendee set individual_id=?, register_id=?, enrollment_date=?, deenrollment_date=?,additionaldetails=?,lastmodifiedby=?, lastmodifiedtime=? where id=?;
        basePath: attendees.*
        jsonMaps:   
         - jsonPath: $.attendees.*.individualId

         - jsonPath: $.attendees.*.registerId

         - jsonPath: $.attendees.*.enrollmentDate

         - jsonPath: $.attendees.*.denrollmentDate

         - jsonPath: $.attendees.*.additionalDetails
           type: JSON
           dbType: JSONB

         - jsonPath: $.attendees.*.auditDetails.lastModifiedBy
 
         - jsonPath: $.attendees.*.auditDetails.lastModifiedTime

         - jsonPath: $.attendees.*.id

 - version: 1.0
   description: update staff
   fromTopic: update-staff
   isTransaction: true
   queryMaps:  
      - query: UPDATE eg_wms_attendance_staff set individual_id=?, register_id=?, enrollment_date=?, deenrollment_date=?,additionaldetails=?,lastmodifiedby=?, lastmodifiedtime=? where id=?;
        basePath: staff
        jsonMaps:   
         - jsonPath: $.staff.individualId

         - jsonPath: $.staff.registerId

         - jsonPath: $.staff.enrollmentDate

         - jsonPath: $.staff.denrollmentDate

         - jsonPath: $.staff.additionalDetails
           type: JSON
           dbType: JSONB

         - jsonPath: $.staff.auditDetails.lastModifiedBy
 
         - jsonPath: $.staff.auditDetails.lastModifiedTime

         - jsonPath: $.staff.id
         